# 命令执行漏洞

**漏洞成因**

> 命令执行漏洞是指服务器没有对执行的命令进行过滤，用户可以随意执行系统命令，命令执行漏洞属于高危漏洞之一 如PHP的命令执行漏洞主要是基于一些函数的参数过滤不足导致，可以执行命令的函数有system( )、exec( )、shell\_exec( )、passthru( )、pcntl\_execl( )、popen( )、proc\_open( )等，当攻击者可以控制这些函数中的参数时，就可以将恶意的系统命令拼接到正常命令中，从而造成命令执行攻击 PHP执行命令是继承WebServer用户的权限，这个用户一般都有权限向Web目录写文件，可见该漏洞的危害性相当大

假使有一个ping ip的网站 而输入框没有屏蔽; || | && &等管道符 导致了恶意代码的运行 这就是命令执行漏洞

**攻击方式/类型**

```
管道符的区别
WINDOWS系统支持的管道符
“|”：直接执行后面的语句
例如：ping www.baidu.com|whoami
“||”：如果前面执行的语句执行出错，则执行后面的语句
例如：ping www.baidu.com||whoami
“&”：如果前面的语句为假则直接执行后面的语句，前面的语句可真可假
例如：ping www.baidu.com&whoami或者ping www.baidu.com&whoami
“&&”：如果前面的语句为真先执行第一个命令后执行第二个命令；为假则直接出错，也不执行后面的语句
例如：ping www.baidu.com&&whoam
LINUX系统支持的管道符
“；”执行完前面的命令执行后面的
“|”：显示后面语句的执行结果
“||”：当前面的语句执行出错时，执行后面的语句
“&”：如果前面的语句为假，则直接指向后面的语句，前面的语句可真可假
“&&”：如果前面的语句为假则直接出错，也不执行后面的语句
```

一般与linux命令 **find** 一同执行 find 目录(一般为/ 根目录) -name(限制条件为名称) 'flag.txt' **如何防御** 过滤管道符 使用白名单机制对输入内容进行限制
